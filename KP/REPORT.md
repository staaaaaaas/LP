# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Арешин С.А. М80-206Б-17

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

## Введение

В процессе выполнения курсового проекта по логическому программированию, я расширил свои знания по данному предмету, узнал о формате GEDCOM для
представления генеологических древ, разобрался, как преобразовать этот формат в файл Пролога с предикатом по варианту, тем самым увеличичв свои
знания в языке, выбранном для парсера (С++). Так же, прменил логику для решения поставленных задач поиска родственника по варианту, сначала 
разработав решение "на бумаге" и реализзовав его в программный код на языке Пролог. 

 
## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: 
     с использованием предикатов father(отец, потомок) и mother(мать, потомок).
 3. Реализовать предикат проверки/поиска  Шурин.

## Получение родословного дерева

Я выбрал родостловное дерево европейской знати, так как в нём много пунтктов, и оно хороошо подходит для работы, а составить свою родословную, 
тем более на нескольок поколений назад мне было бы очень проблематично, так как у меня есть родственникики как в России, так и в Украине, при чём достоточно 
много, и сбор инофрмации для родословного дерева был бы не самой легкой задачей. 

## Конвертация родословного дерева

Для написания парсера я выбрал язык С++, конечно, намного проще было бы использовать Python, однако я не владею этим языком, и мне проще реализовать
парсер на C++. Парсер получился достаточно объёмным - 137 строк кода, в то время как на Python'e он бы занял примерно 50-60 строк. 
Основой прасера является структра Person:

	typedef struct person {
		std::string name; //name
		int id; //index
		int sex; //sex of peron
	} Person;
	
С помощью вспомогательных функций Sex, Index, Name мы заполняем поля это структуры из файла GEDCOM построчно, а затем с поомщью Index и ещё одной функции Element,
мы парсим данные на язык пролог, использую предикаты father(отец, потомок) и mother(мать, потомок). Описание функций Sex, Index, Name, Element можно посмотреть
в листинге парсера pars.cpp. В резаультате парсинга получилось 275 строк.	

## Предикат поиска родственника

По варинату задания мне нужно было реализовать предикат поиска Шурина, который я назавал find_shurin. Для начала я привиду листиннг данного предиката:

	%task 3

	%finding using father as parent

	find_shurin(Husband,Shurin):-
		father(Husband,Child),
		mother(Wife,Child),
		father(Parent,Wife),
		father(Parent,Shurin),
		father(Shurin,_),!.

	%else finding using mother as parent

	find_shurin(Husband,Shurin):-
		father(Husband,Child),
		mother(Wife,Child),
		mother(Parent,Wife),
		mother(Parent,Shurin),
		father(Shurin,_),!.

Теперь поснения. Шурин это брат жены. То есть для поиска задаётся имя мужчины. Мы ищем его ребёнка через предикат father и по ребенку восстанавливаем его жену, то 
есть ищем мать этого ребенка предикатом mother. Далее есть два варианта развития событий: поиск брата по отцу и по матери. Рассмотрим поиск по отцу. Мы ищем отца жены, 
затем ищем второго ребенка от этого же отца и проверяем, мужчина ли он с помощью: то есть явялется ли он отцом кому-нибудь, так как предикат определения пола отсутсвует, 
но мы можем его заменить таким образом. Если он мужчина, то он Шурин. Если у жены нет отца, то поиск идёт по матери аналогично.
Результат работы:

?- find_shurin("Константин Семенович, кн. Оболенский",X).
false.

?- find_shurin("Юрий Михайлович, кн. Тарусский",X).
false.

?- find_shurin("Андрей Всеволодович Шутиха Мезецкий",X).
false.

?- find_shurin("Владимир I Святославич Святой, вел.кн. Киевский",X).
false.

Перебрав достаточное количество мужчин из родословного дерева знати, мне не удалось найти Шурина для любого из них, поэтому я решид написать свой тест:

father("Муж","Сын").
mother("Жена","Сын").
father("Отец","Жена").
father("Отец","Брат").
mother("Мать","Жена").
mother("Мать","Брат").
father("Брат","Кто-то").

Результат:

?- find_shurin("Муж",X).
X = "Брат".

В обоих случаях поиска: по отцу и по матери.

## Выводы

Курсовой проект помог мне разобраться, как это не парадоксально, в логике логического языка программирования Prolog. Я понял, что для решения потсавленной задачи на 
это языке необходимо в первую очередь научиться правильно думать, думать так, как думает программа на Prolog'e. Разработка предиката дял поиска шурина - это хорошая
задача на логику, учитывая, что доступны только предикаты father и mother для работы. Мне не сращу пришло  в голову использовать предикат father для определения
пола, однако на языке Prolog это реализуется довольно просто. Сложности вызвало написание парсера, так как необходимо было разобраться в двух задачах: как вообще
получать данные из формата GEDCOM и как затем преобразовывать их в запись на языке пролог с нужными предикатами. Курсововой проект помог мне немного изнутри узнать,
как рабоатет пролог, а так же для себя понять методы поиска решения задач вне пролога, чтобы потом реализовать его в код. Так же было интересно познакомиться с реальной
задачей, для которой можно применить этот язык, что привнесло небольшое понимаение его области применения.
